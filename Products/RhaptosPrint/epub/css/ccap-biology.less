/***************************************************
 * Styles used when generating a PDF from xhtml+css
 ***************************************************/
@teal: #006666;
@cream: #FBF2E2; // For table backgrounds (from Physics)
@light-green: LimeGreen;
@green: Green;
@blue: #0061AA;  // For End-of-Chapter titles (from Physics)
@orange: #ffcc00;
@gray: #cccccc;
@blue: blue;


@import url('ccap-base.less');
@import url('ccap-numbering.less');

/****** Features ******/
// The args are title color, background color, and path to SVG
.evolution          { .x-feature(#330033, #ccccff, research); }
.scientific-method  { .x-feature(#006666, #ccffff, real-world); }
.everyday           { .x-feature(#336600, #ccff99, big-picture); }
.careers            { .x-feature(#336633, #ccffcc, careers); }
.interactive-links  { .x-feature(#993333, #ffcccc, policy-debate); }

.x-feature (@color, @bg-color, @svg) {

  padding: 0em; // Override default note padding in ccap-base
  
  /* When a feature is set to span both columns, make sure internally it has 2 columns */
  &.span-all {
    .x-page-float(bottom);
    .body { .x-column-count(2); }
  }
  
  /* Inject a banner SVG on top of the feature */
  &:before {
    padding-top: 0.75in; //0.75 + margin-top. 0.75in is from the SVG files
    background-repeat: no-repeat;
    background-position: top left;
    background-position: top outside;
    content: "";
    display: block;
    page-break-after: avoid;
    column-break-after: avoid;
    // the following are tweaked so the overlays really do over lay
    margin-right: -1.05em;
    margin-top: -0.03in;
    
    background-image: url("ccap-sociology/@{svg}.svg");    
  }

  /* Move the title so it shows up in the colored box */
  .title {
    string-set: cnx-feature-title content();
    display: none;
  }
  
  .body {
    background-color: @bg-color;

    /* Inject the feature subtitle (note title) into the body so it shares the same background color */    
    &::before {
      content: string(cnx-feature-title);
      color: @color;
      font-size: x-large;
      margin: .25em 0;
    }
  }
}

/*********************** Table of Contents ********************/

/* "Key Concepts" Introduction table */
.chapter .toc {

  float: right;
  float: outside;
  
  & > .title {
    content: "Key Concepts";
    color: @light-green;
    font-weight: bold;
    text-align: left;
  }

  a {
    .cnx-gentext-n,
    .cnx-gentext-autogenerated {
      color:LimeGreen;
    }
    &:before { display:none; }
  }
}




/* Don't indent the 1st paragraph of a feature, note, section, whatever */
.cnx-eoc p,
p:nth-of-type(1) {
  text-indent: 0em;
}
p {
  font-family: Liberation Serif, serif, STIXGeneral, STIXSizeOneSym, STIXSize1;
  /* subsequent paragraphs are indented */
  text-indent: 2em;
}


.glossary {

  // End-of-chapter material should start on a new page 
  page-break-before: always;

  .title {
    /* Change "Glossary" to "Key Terms" */
    content: "Key Terms";
    color: @blue;
    border-bottom: 1px solid @green;
    font-size: x-large !important;
    padding: 0em !important;
    display: block !important;
  }

  // Remove ":"
  dt::after {
    content: " " !important;
  }
}

div.cnx-eoc {
  & > .title {
    display: none;
  }
  
  & > div.section > div.title {
    color: @green;
    border-bottom: 1px solid @green;
    
    // ccap-base sets this so override it here
    & a {
      font-size: x-large !important;
    }

    & .cnx-gentext-t:not(.labeled) {
      content: "| " content();

      &::before {
        color: black;
      }
    }
  }
}


/* Indent margins on lists */
.cnx-eoc .problem .orderedlist {
  margin-left: 4em;
}

.cnx-eoc.references p {
  text-indent: 0em;
}

body {
	  font-size: 9.5pt;
}

.span-all img {
  max-width: 5in;
}

img {
  max-width: 5in;
}


.chapter h1.title {
  
  font-size: 5em; /* xx-large; */
  font-weight: bold;
  padding: 0em;
  text-transform: none;

  .cnx-gentext-n {
    font-weight: bold;
    padding-left: 0.25em;
    padding-right: 0em;
  }

  .cnx-gentext-t {
    color: @teal;

    &::before {
      content: "| ";
      color: @light-green;
    }
  }

}


a {
	color: inherit;
	font-weight: normal;
}
.toc > li > ul a {
  color: #0061AA;
}
h2, h3 {
  margin: 0.5em 0em;
}
h2 {
  color: @green;
  font-size: x-large;

  // Separate the section number and title with a pipe
  .cnx-gentext-t::before {
    content: "| ";
  }

  &::before {
    color: black;
  }
}
h3 {
  color: @orange;
	font-size: large;
}
h4 {
  color: @green;
}

blockquote {

  color: @gray;
  font-size: 150%;
  
  &::before,
  &::after {
    font-weight: bold;
    color: black;
  }

  &::before { content: "\201C" /* open-quote */; }
  &::after { content: "\201D" /* close-quote; */; }
}

.chapter {
  .x-column-count(2);
  
  & > .titlepage,
  & > .introduction {
    .x-page-float(top);
  }
  
  .introduction {
    page-break-after: always;
  
    /** For some reason the design template doesn't have a intro title **/
    & > .title { display: none; }
  }  
}


.table {
  /* Tables that span both columns float to the bottom of a page */
  &.span-all {
    .x-page-float(bottom);
  }
  
  table {
    background-color: @cream;
  }
  caption {
    color: Purple;
  }
  th {
    background-color: Purple;
  }
}

.figure {
  /* Figures that span both columns float to the top of a page */
  &.span-all {
    .x-page-float(top);
  }

  & > .title {
    display: inline;
    color: @orange;
    font-weight: bold;
    font-size: small;
  }
  & > .caption {
    display: inline;
    font-weight: bold;
  }

}

.note > .title {
  border-bottom: 0px;  
}

/* These are end-of-chapter collected solutions */
.solutions {
  display: block; // Since they're disabled in ccap-physics
  color: gray;
  float: bottom;
  transform: rotate(180deg);
  -webkit-transform: rotate(180deg);
  
  a {
    color: gray;
    //font-weight: bold;
  }

  & * {
    display: inline;
  }
    
  & > div {
    margin: 0em 0.5em;
    
    &.title {
      border: 0em; // remove the underscore
    }
  }
}
