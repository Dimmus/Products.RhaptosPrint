
Here are the stages of conversion:
(Mostly done by xsltproc, math2svg using Saxon, and XSL-FO to PDF using Apache FOP)

For each module, the following are done:
 * Cleanup the cnxml
 * Cleanup the MathML in the cnxml (remove empty mml:mo, extra mml:munder, etc)
 * Convert cnxml to Docbook
 * Convert P-MathML to SVG (using Saxon and XSLT2)
 * Cleanup the Docbook file (add error text for unconverted MathML, move all exercises to end of module)
 * Create a separate Docbook file for validation.
   Reorder Docbook elements for RelaxNG validation.
   In RNG, a para can occur before a section but not after
 * Validate the Docbook file

Temporary files are created and deleted (if everything passes).

Individual PDFs can be made for each module to make sure there are no other errors.
  (see the module2pdf.sh script for how to do that)


At this point the entire collection PDF is created:
 * Resolve the xi:include elements and create a giant Docbook file
 * Cleanup the giant Docbook file
   * module titles with the chapter prefix are removed
   * exercises are moved
   * glossary definitions are moved
 * Convert the Docbook file to XSL-FO (using xsl/dbk2fo.xsl and docbook-xsl/fo)
 * Align the Math SVG properly (using xsl/fo-align-math.xsl)
 * Convert the XSL-FO file to PDF (using FOP)
